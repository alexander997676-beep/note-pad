<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOTE PAK | Elite Edition</title>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #c084fc;
            --accent: #6366f1;
            --bg: #030305;
            --card: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
            --text: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }
        
        body { 
            background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; 
            display: flex; justify-content: center;
        }

        /* --- SPLASH SCREEN --- */
        #splash {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: 0.8s ease-in-out;
        }
        #splash h1 { 
            font-size: 60px; font-weight: 900; letter-spacing: 5px;
            background: linear-gradient(to right, #6366f1, #c084fc);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: glow 2s infinite alternate;
        }

        /* --- APP SHELL --- */
        .app-shell {
            width: 100%; max-width: 480px; background: #050507; height: 100vh;
            position: relative; border-left: 1px solid var(--border);
            border-right: 1px solid var(--border); display: flex; flex-direction: column;
        }

        header { padding: 40px 25px 10px; display: flex; justify-content: space-between; align-items: center; }
        header h1 { font-size: 26px; font-weight: 800; color: var(--primary); }

        .dashboard { flex: 1; overflow-y: auto; padding: 20px 25px 150px; }
        
        .search-wrap { position: relative; margin-bottom: 25px; }
        .search-wrap i { position: absolute; left: 18px; top: 16px; color: #555; }
        .search-box {
            width: 100%; padding: 15px 15px 15px 45px; background: var(--card); 
            border: 1px solid var(--border); border-radius: 18px; color: white; outline: none;
        }

        .note-card {
            background: var(--card); border: 1px solid var(--border); padding: 22px;
            border-radius: 24px; margin-bottom: 18px; cursor: pointer; transition: 0.4s;
        }
        .note-card:hover { border-color: var(--primary); background: rgba(192, 132, 252, 0.05); }

        /* --- FIXED PLUS BUTTON (FAB) --- */
        .fab {
            position: absolute; 
            bottom: 100px; /* Credit bar se upar */
            right: 30px; 
            width: 65px; 
            height: 65px;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            border-radius: 22px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            color: white; 
            box-shadow: 0 10px 30px rgba(192, 132, 252, 0.5);
            cursor: pointer; 
            z-index: 999; /* Isko sab se upar rakha hai */
            transition: 0.3s;
            border: none;
            outline: none;
        }
        .fab:active { transform: scale(0.9); }

        /* --- FOOTER CREDIT --- */
        .designer-credit {
            padding: 20px; text-align: center; font-size: 11px; color: #555;
            letter-spacing: 1px; border-top: 1px solid var(--border); background: #000;
            font-weight: 700; text-transform: uppercase; z-index: 100;
        }
        .designer-credit span { color: var(--primary); }

        /* --- EDITOR --- */
        .editor {
            position: absolute; inset: 0; background: #000; z-index: 1000;
            display: none; flex-direction: column;
        }
        .editor-header { padding: 25px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--border); }
        .editor-content { flex: 1; padding: 25px; overflow-y: auto; }
        #note-title { font-size: 32px; font-weight: 800; background: none; border: none; color: white; outline: none; width: 100%; margin-bottom: 15px; }
        #note-text { font-size: 18px; width: 100%; height: 70%; background: none; border: none; color: #bbb; outline: none; resize: none; line-height: 1.6; }

        .overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px);
            z-index: 2000; display: none; justify-content: center; align-items: center;
        }
        .modal { background: #111; padding: 40px; border-radius: 35px; width: 85%; max-width: 360px; text-align: center; border: 1px solid var(--border); }
        .modal input { width: 100%; padding: 18px; border-radius: 15px; border: 1px solid var(--border); background: #000; color: white; margin: 20px 0; text-align: center; font-size: 22px; }
        .btn-action { width: 100%; padding: 18px; border-radius: 15px; border: none; background: var(--primary); color: #000; font-weight: 900; cursor: pointer; }

        .tool-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 14px; }
    </style>
</head>
<body>

    <!-- Splash Screen -->
    <div id="splash">
        <h1>NOTE PAK</h1>
        <p style="color: #444; font-size: 10px; margin-top: 20px; letter-spacing: 3px;">BY MUHAMMAD FAIZAN AHMED</p>
    </div>

    <div class="app-shell">
        <header>
            <h1>NOTE PAK</h1>
            <button class="tool-btn" onclick="exportData()"><i data-lucide="download"></i></button>
        </header>

        <div class="dashboard">
            <div class="search-wrap">
                <i data-lucide="search" size="18"></i>
                <input type="text" class="search-box" id="search-input" placeholder="Search secrets..." oninput="renderNotes()">
            </div>
            
            <div id="notes-list">
                <!-- Notes list -->
            </div>
        </div>

        <!-- YEH RAHA PLUS BUTTON -->
        <button class="fab" onclick="createNew()">
            <i data-lucide="plus" size="35" style="stroke-width: 3px;"></i>
        </button>

        <div class="designer-credit">
            DESIGNED BY <span>MUHAMMAD FAIZAN AHMED</span>
        </div>

        <!-- Editor View -->
        <div class="editor" id="editor-view">
            <div class="editor-header">
                <button class="tool-btn" onclick="closeEditor()"><i data-lucide="arrow-left" size="30"></i></button>
                <div style="display: flex; gap: 20px;">
                    <button class="tool-btn" onclick="setSecurity()"><i data-lucide="lock"></i></button>
                    <button class="tool-btn" style="color: var(--primary)" onclick="saveNote()"><i data-lucide="save"></i></button>
                </div>
            </div>
            <div class="editor-content">
                <input type="text" id="note-title" placeholder="Title...">
                <textarea id="note-text" placeholder="Start writing..."></textarea>
            </div>
        </div>

        <!-- Modal -->
        <div class="overlay" id="modal-bg">
            <div class="modal">
                <i data-lucide="key" size="50" style="color: var(--primary)"></i>
                <h2 id="modal-label" style="margin-top: 15px;">Authorization</h2>
                <input type="password" id="modal-input" placeholder="â€¢â€¢â€¢â€¢">
                <button class="btn-action" id="modal-btn">PROCEED</button>
                <button class="tool-btn" style="width: 100%; margin-top: 15px;" onclick="closeModal()">CANCEL</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        let notes = JSON.parse(localStorage.getItem('notepak_elite_db')) || [];
        let activeId = null;

        // Splash screen 
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => document.getElementById('splash').style.display = 'none', 800);
            }, 2500);
            renderNotes();
        };

        function renderNotes() {
            const list = document.getElementById('notes-list');
            const search = document.getElementById('search-input').value.toLowerCase();
            list.innerHTML = '';

            notes.filter(n => n.title.toLowerCase().includes(search)).forEach(n => {
                const card = document.createElement('div');
                card.className = 'note-card';
                card.onclick = () => openNote(n.id);
                card.innerHTML = `
                    <h3>${n.pass ? 'ðŸ”’' : ''} ${n.title || 'Untitled'}</h3>
                    <p>${n.pass ? 'Encrypted and Locked.' : n.text.substring(0, 70) + '...'}</p>
                `;
                list.appendChild(card);
            });
            lucide.createIcons();
        }

        function createNew() {
            activeId = null;
            document.getElementById('note-title').value = '';
            document.getElementById('note-text').value = '';
            document.getElementById('editor-view').style.display = 'flex';
        }

        function saveNote() {
            const title = document.getElementById('note-title').value;
            let text = document.getElementById('note-text').value;
            if(!title && !text) return closeEditor();

            if (activeId) {
                const n = notes.find(x => x.id === activeId);
                if(n.pass) text = CryptoJS.AES.encrypt(text, n.pass).toString();
                Object.assign(n, { title, text });
            } else {
                notes.unshift({ id: Date.now(), title, text, pass: null });
            }
            localStorage.setItem('notepak_elite_db', JSON.stringify(notes));
            renderNotes();
            closeEditor();
        }

        function openNote(id) {
            const n = notes.find(x => x.id === id);
            activeId = id;
            if (n.pass) {
                showModal("Access Key", (pass) => {
                    try {
                        const bytes = CryptoJS.AES.decrypt(n.text, pass);
                        const dec = bytes.toString(CryptoJS.enc.Utf8);
                        if(!dec) throw 'err';
                        loadEditor(n.title, dec);
                        closeModal();
                    } catch(e) { alert("Invalid Key!"); }
                });
            } else {
                loadEditor(n.title, n.text);
            }
        }

        function loadEditor(t, c) {
            document.getElementById('note-title').value = t;
            document.getElementById('note-text').value = c;
            document.getElementById('editor-view').style.display = 'flex';
        }

        function setSecurity() {
            showModal("Set Password", (p) => {
                if(!p) return;
                const c = document.getElementById('note-text').value;
                const enc = CryptoJS.AES.encrypt(c, p).toString();
                if(activeId) {
                    const n = notes.find(x => x.id === activeId);
                    n.text = enc; n.pass = p;
                } else {
                    notes.unshift({ id: Date.now(), title: document.getElementById('note-title').value || 'Secure Note', text: enc, pass: p });
                }
                localStorage.setItem('notepak_elite_db', JSON.stringify(notes));
                closeModal(); closeEditor(); renderNotes();
            });
        }

        function showModal(title, cb) {
            document.getElementById('modal-bg').style.display = 'flex';
            document.getElementById('modal-label').innerText = title;
            const input = document.getElementById('modal-input');
            input.value = ''; input.focus();
            document.getElementById('modal-btn').onclick = () => cb(input.value);
        }

        function closeModal() { document.getElementById('modal-bg').style.display = 'none'; }
        function closeEditor() { document.getElementById('editor-view').style.display = 'none'; }
        
        function exportData() {
            const data = new Blob([JSON.stringify(notes)], {type: 'application/json'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(data); a.download = 'NotePak_Backup.json'; a.click();
        }

    </script>
</body>
</html>
